<template>
  <require from="../custom_elements/document-row.html"></require>

  <div>
    <div class="row one-page">
      <div class="col m4 areas">
        <md-collection view-model.ref="list">
          <md-collection-item repeat.for="cls of classes" style="position: relative"
            class="${ selector.isSelected ? 'selected' : '' } ${ selector.mdDisabled ? 'disabled' : '' }">
            <div>
              <span style="position:relative;">${cls["Title"]}</span>
              <md-collection-selector view-model.ref="selector" item.bind="cls"
                md-on-selection-changed.delegate="onSelectionChanged($event)">
              </md-collection-selector>
            </div>
          </md-collection-item>
        </md-collection>
      </div>
      <div class="col m8 areas">
        <input type="text" class="form-control col-md-2 search-box" value.bind="searchTerm"
          placeholder="search..."></input>
        <button class="btn btn-default col-md-2 clear-btn" if.bind="searchTerm.length > 0"
          click.delegate="clearFilter()"><i class="fa fa-times"></i> clear</button>
        <div repeat.for="doc of meta
        | sort: { propertyName: sort_property, direction: 'ascending' }
        | filter:searchTerm:filterFunc & debounce:1500">
          <strong>
            ${doc["Title"]}
          </strong>
          <div repeat.for="rec of doc['Clusters']">
            <strong>
              ${rec}
            </strong>
            <br>
            <span repeat.for="sent of createEvidence(rec, doc)">
              <i>
                ${sent}
              </i>
              <br>
            </span>
          </div>
          <br>
        </div>
      </div>
    </div>
  </div>

</template>